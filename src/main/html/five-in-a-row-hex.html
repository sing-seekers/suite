<meta charset='utf-8'>
<!--
file:///home/ywsing/suite/src/main/html/five-in-a-row-hex.html
-->
<!DOCTYPE html>
<html>
	<head>
		<title>0 - Five in a row</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="https://fonts.googleapis.com/css?family=Oswald:200&display=swap" rel="stylesheet">
	</head>
	<body>
		<style>
			body {
				font-family: monospace;
			}
			.hex {
				float: left;
				margin: 0px 0px -13px 1.5px;
			}
			.hex .middle {
				font-size: 30px;
				height: 30px;
				position: relative;
				width: 52px;
			}
			.hex .part {
				border-left: 26px solid transparent;
				border-right: 26px solid transparent;
				width: 0;
			}
			.hex-row {
				clear: left;
			}
		</style>
		<div id='target'></div>
	</body>

	<script src='five-in-a-row.js'></script>
	<script src='frp.js'></script>
	<script src='fun.js'></script>
	<script src='pq.js'></script>
	<script src='render.js'></script>

	<script type='text/javascript'>
'use strict';

let { lens, range, read, } = fun();
let { rd, renderAgain, } = render();
let close;

// https://www.colourlovers.com/palette/373610/Melon_Ball_Surprise
let palette = ['#D1F2A5', '#EFFAB4', '#FFC48C', '#FF9F80', '#F56991',];

let icons = [ '🍋', '🌲', '💖', '🐬', '🐵', '🍊', '🍇', '💮', '✴️', ];
icons[-1] = '💀';
// 😂

let viewCell = rd.parse(`
	<div class='hex' style='filter: { vm.selected ? "brightness(80%)" : "brightness(100%)" };' rd_on_click='handleclick(vm, ev)'>
		<div class='part' style='border-bottom: 15px solid #DDDDDD;'></div>
		<div class='middle' style='background: #DDDDDD'>
			<span style='left: 50%; position: absolute; top: 50%; transform: translate(-50%, -50%);'>
				<rd_map v='vm.d'>
					<rd_if v='vm != null'>{ icons[vm] }</rd_if>
				</rd_map>
			</span>
		</div>
		<div class='part' style='border-top: 15px solid #DDDDDD;'></div>
	</div>
`);

let viewCells = rd.parse(`
	<div class='hex-row' style='margin-left: { (vm[0].x + vm[0].y) * 26.5 }px'>
		<rd_for>
			<rd_component v='viewCell' />
		</rd_for>
	</div>
`);

let view = rd.parse(`
	<span style='display: flex; flex-direction: column;'>
		<span style='align-items: center; display: flex; justify-content: space-between;'>
			<span style='justify-content: flex-start;'>
				<rd_map v='vm.nextstones'>
					<rd_component v='viewCells' />
				</rd_map>
			</span>
			<span style='justify-content: flex-end;'>
				<span style='font-family: Oswald, monospace;'>{ vm.score }</span>
			</span>
		</span>
		<span>
			<img height='100' />
		</span>
		<rd_map v='vm.board'>
			<rd_for>
				<rd_component v='viewCells' />
			</rd_for>
		</rd_map>
		<!-- button rd_on_click='handleclose()'>close</button -->
		<rd_map v='vm.notifications'>
			<div style='background: { palette[1] }; bottom: 0; left: 0; position: fixed; text-align: center; width: 100%;'>
				<rd_for>
					<p style='font-family: monospace;'>{ vm }</p>
				</rd_for>
			</div>
		</rd_map>
	</span>
`);

let eatdirs = [[0, -1], [-1, 0], [-1, +1], ];
let movedirs = [[-1, 0], [+1, 0], [0, -1], [0, +1], [-1, +1,], [+1, -1,], ];

vw.init();

	</script>
</html>
